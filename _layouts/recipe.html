---
layout: default
---

<article class="recipe">

    <h1>{{ page.title }}</h1>
    <img src="{{ page.image | relative_url }}" alt="{{ page.title }}" class="recipe-image">
    <p class="recipe-description">{{ page.description }}</p>

    <div class="recipe-body">
        <div class="ingredients">
            <h2>Ingredienser</h2>
            <ul class="ingredient-list">
                {% for group in page.ingredients %}
                {% if group.section %}
                <li class="ingredient-subheader">{{ group.section }}</li>
                {% for item in group.items %}
                <li class="ingredient-item">{{ item.quantity }} {{ item.name | markdownify | remove: '<p>' | remove: '</p>' }}</li>
                {% endfor %}
                {% else %}
                <li class="ingredient-item">{{ group.quantity }} {{ group.name }}</li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
        <div class="instructions">
            <h2>Gör så här</h2>
            <ol>
                {% for step in page.instructions %}
                <li>{{ step | markdownify | remove: '<p>' | remove: '</p>' }}</li>
                {% endfor %}
            </ol>
        </div>
        <div class="share-container">
            <button id="share-button" class="share-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.498 2.498 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
                </svg>
                Dela recept</button>
        </div>
    </div>

    <div class="recipe-notes">
        {{ content }}
    </div>

</article>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const shareButton = document.getElementById('share-button');

        // Ensure the share button and navigator exist
        if (shareButton && navigator) {
            shareButton.addEventListener('click', async () => {
                const shareData = {
                    title: document.title,
                    text: '{{ page.description | escape }}',
                    url: '{{ page.url | absolute_url }}'
                };

                try {
                    // Use the Web Share API if available
                    if (navigator.share) {
                        await navigator.share(shareData);
                    } else if (navigator.clipboard) {
                        // Fallback to copying the link to the clipboard
                        await navigator.clipboard.writeText(shareData.url);
                        shareButton.innerText = 'Länk kopierad!';
                        setTimeout(() => {
                            shareButton.innerText = 'Dela recept';
                        }, 2000);
                    }
                } catch (err) {
                    console.error('Error sharing:', err);
                }
            });
        }
    });
</script>
