<meta name="description" content="{{ page.description | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">

<meta property="og:title" content="{{ page.title | default: site.title | escape }}">
<meta property="og:description" content="{{ page.description | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
<meta property="og:url" content="{{ page.url | absolute_url }}">
<meta property="og:site_name" content="{{ site.title | escape }}">
<meta property="og:type" content="article">
{% if page.image %}
<meta property="og:image" content="{{ page.image | absolute_url }}">
{% else %}
<meta property="og:image" content="{{ site.default_image | absolute_url }}">
{% endif %}

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page.title | default: site.title | escape }}">
<meta name="twitter:description" content="{{ page.description | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
{% if page.image %}
<meta name="twitter:image" content="{{ page.image | absolute_url }}">
{% else %}
<meta name="twitter:image" content="{{ site.default_image | absolute_url }}">
{% endif %}

{% if page.layout == 'recipe' %}
<script type="application/ld+json">
    {
        "@context": "https://schema.org/",
        "@type": "Recipe",
        "name": "{{ page.title | escape }}",
        "image": [
            "{{ page.image | absolute_url }}"
        ],
        "author": {
            "@type": "Person",
            "name": "{{ site.author | default: site.title | escape }}"
        },
        "datePublished": "{{ page.date | date_to_xmlschema }}",
        "description": "{{ page.description | escape }}"
    {% if page.diet %}
    ,"suitableForDiet": [
    {% for diet_type in page.diet %}
    "{{ diet_type }}"{% unless forloop.last %},{% endunless %}
    {% endfor %}
    ]
    {% endif %}
    {% if page.servings %}
    ,"recipeYield": "{{ page.servings | escape }}"
    {% endif %}
    ,"recipeIngredient": [
    {% for group in page.ingredients %}{% for item in group.items %}"{{ item.quantity }} {{ item.name }}"{% unless forloop.last and forloop.parentloop.last %},{% endunless %}
    {% endfor %}{% endfor %}
    ],
    "recipeInstructions": [
    {% for step in page.instructions %}
    {
    "@type": "HowToStep",
    "text": "{{ step | escape }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
    ]
    }
</script>
{% endif %}

